<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>


</head>

<body>
    <div id="div">

    </div>

</body>
<script src="../React-js/react.development.js" type="text/javascript"></script>
<script src="../React-js/react-dom.development.js" type="text/javascript"></script>

<script src="../React-js/babel.min.js"></script>

<script src="../React-js/prop-types.js"></script>

<script type="text/babel">

    // 生命周期回调函数 <=> 生命周期钩子函数 <=> 生命周期函数
    class Life extends React.Component {
        state = { time: 1 };

        stop = () => {
            // 卸载组件
            ReactDOM.unmountComponentAtNode(document.getElementById("div"))

        }

        // 组件挂载完毕之后调用
        componentDidMount() {
            this.Inter = setInterval(() => {
                let { time } = this.state;
                time -= 0.1;
                if (time <= 0) {
                    time = 1;
                }
                this.setState({ time: time });
            }, 200);
        }

        componentWillUnmount() {
            clearInterval(this.Inter);
        }

        // render调用的时机：初始化渲染、状态更新之后
        render() {
            return (
                <div>
                    <h2 style={{ opacity: this.state.time }}>生命周期</h2>
                    <button onClick={this.stop}>结束</button>
                </div>
            )
        }
    }

    ReactDOM.render(<Life />, document.getElementById("div"));

</script>

</html>